<!DOCTYPE html>
<html lang="en" data-accent-color="cyan" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>4.14. GUI Automation - optrace 1.7.5 documentation</title><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="4.15. Advanced Topics" href="advanced.html" /><link rel="prev" title="4.13. GUI Interaction" href="gui.html" />
      <link rel="canonical" href="https://drocheam.github.io/optrace/usage/gui_automation.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"dark");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=d48c410d" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=81da21d3" />
    <!--intentionally blank so there are no external fonts loaded-->
    <meta property="og:type" content="website"/>
<meta property="og:url" content="https://drocheam.github.io/optrace/usage/gui_automation.html"/>
<meta property="og:title" content="4.14. GUI Automation"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      
      
      <strong>optrace</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link"><a href=".././examples.html">Examples</a></li><li class="link"><a href=".././installation.html">Installation</a></li><li class="link"><a href=".././usage/index.html">User Guide</a></li><li class="link">
          <a href="https://github.com/drocheam/optrace">
            <span>GitHub Repo</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><!--custom github logo so we don't need to connect to some icon provider-->
<div class="sy-head-socials"><a href="https://github.com/drocheam/optrace" aria-label="GitHub">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
  <a href="https://github.com/drocheam/optrace/releases" aria-label="Releases">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package-icon lucide-package"><path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"/><path d="M12 22V12"/><polyline points="3.29 7 12 12 20.71 7"/><path d="m7.5 4.27 9 5.15"/></svg>
  </a>
</div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../examples.html">1. Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">3. Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">4.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="surfaces.html">4.2. Base Shapes (Surface, Line, Point)</a></li>
<li class="toctree-l2"><a class="reference internal" href="elements.html">4.3. Elements (Lens, Ray Source,  â€¦)</a></li>
<li class="toctree-l2"><a class="reference internal" href="group.html">4.4. Geometry Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="raytracer.html">4.5. Raytracer</a></li>
<li class="toctree-l2"><a class="reference internal" href="refraction_index.html">4.6. Refractive Indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectrum.html">4.7. Spectrum Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="image.html">4.8. Image Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="focus.html">4.9. Focus Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="tma.html">4.10. Paraxial Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="convolve.html">4.11. PSF Convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">4.12. Plotting Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui.html">4.13. GUI Interaction</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.14. GUI Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">4.15. Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../details/index.html">5. Implementation Details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../details/sampling.html">5.1. Property Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/tracing.html">5.2. Tracing Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/hurb.html">5.3. Heisenberg Uncertainty Ray Bending</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/image_spectrum.html">5.4. Image and Spectrum Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/matrix_analysis.html">5.5. Ray Transfer Matrix Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/convolution.html">5.6. PSF Convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/focus.html">5.7. Focus Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/color.html">5.8. Color Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/misc.html">5.9. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">6. API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/structure.html">6.1. Library Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace.html">6.2. Global Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer.html">6.3. tracer Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_color.html">6.4. tracer.color Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_geometry.html">6.5. tracer.geometry Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_geometry_surface.html">6.6. tracer.geometry.surface Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_image.html">6.7. tracer.image Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_spectrum.html">6.8. tracer.spectrum Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_presets.html">6.9. tracer.presets Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_plots.html">6.10. plots Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_gui.html">6.11. gui Submodule</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">7. Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html">7.1. Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html">7.2. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/packaging.html">7.3. Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/notes.html">7.4. Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/changelog.html">7.5. Changelog</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#the-control-method">4.14.1. The Control Method</a></li>
<li><a class="reference internal" href="#applying-properties">4.14.2. Applying Properties</a></li>
<li><a class="reference internal" href="#replotting">4.14.3. Replotting</a></li>
<li><a class="reference internal" href="#controlling-the-camera">4.14.4. Controlling the Camera</a></li>
<li><a class="reference internal" href="#taking-screenshots">4.14.5. Taking Screenshots</a></li>
<li><a class="reference internal" href="#selecting-rays">4.14.6. Selecting Rays</a></li>
<li><a class="reference internal" href="#picking-manually">4.14.7. Picking Manually</a></li>
<li><a class="reference internal" href="#showing-plots">4.14.8. Showing Plots</a></li>
<li><a class="reference internal" href="#accessing-custom-ui-elements">4.14.9. Accessing custom UI elements</a></li>
<li><a class="reference internal" href="#closing-down">4.14.10. Closing Down</a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">optrace</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name"><span class="section-number">4. </span>User Guide</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name"><span class="section-number">4.14. </span>GUI Automation</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="gui-automation">
<span id="id1"></span><h1><span class="section-number">4.14. </span>GUI Automation<a class="headerlink" href="#gui-automation" title="Link to this heading">Â¶</a></h1>
<p>Some exemplary automation tasks include:</p>
<ul class="simple">
<li><p>changing the geometry</p></li>
<li><p>changing camera views accurately</p></li>
<li><p>displaying specific rays</p></li>
<li><p>picking specific rays</p></li>
<li><p>debugging</p></li>
<li><p>taking automated screenshots of the scene</p></li>
<li><p>calling functions with settings not available through the GUI</p></li>
<li><p>â€¦</p></li>
</ul>
<section id="the-control-method">
<h2><span class="section-number">4.14.1. </span>The Control Method<a class="headerlink" href="#the-control-method" title="Link to this heading">Â¶</a></h2>
<p>To do automated tasks, the <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.control" title="optrace.gui.trace_gui.TraceGUI.control"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.control</span></code></a> method needs to be used instead of <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.run" title="optrace.gui.trace_gui.TraceGUI.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.run</span></code></a>.
It requires an automation function as well as an argument tuple.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">GUI</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># do some automation things</span>
</span><span data-line="4">    <span class="o">...</span>
</span><span data-line="5">
</span><span data-line="6"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="7"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="8"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>After the control function is executed the program is kept running.
This makes it possible to interact with the GUI.
Closing the application automatically is described in <a class="reference internal" href="#gui-automation-close"><span class="std std-numref">Section 4.14.10</span></a></p>
<p>To avoid race conditions, all actions inside the provided automation function are run sequentially.
During this time, the GUI is unresponsive, as the automation function is run in the main thread (as user input would also be) so the interaction with the scene in this time will be limited.</p>
</section>
<section id="applying-properties">
<h2><span class="section-number">4.14.2. </span>Applying Properties<a class="headerlink" href="#applying-properties" title="Link to this heading">Â¶</a></h2>
<p>Available TraceGUI properties are discussed in <a class="reference internal" href="gui.html#gui-tabs"><span class="std std-numref">Section 4.13.3</span></a>.
All these can be set programmatically.</p>
<p>While the variables are set, the TraceGUI does not execute the functions or actions that react to these changes automatically.
This is in contrast to the standard <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.run" title="optrace.gui.trace_gui.TraceGUI.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.run</span></code></a> method,
where a setting is applied subsequently (for instance, changing the ray color setting updates the color in the scene automatically).</p>
<p>To process all pending events <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.process" title="optrace.gui.trace_gui.TraceGUI.process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.process</span></code></a> must be called.
This is not needed after every property change, but only if the changes should be visible/executed at this point.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">GUI</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># change properties</span>
</span><span data-line="4">    <span class="n">GUI</span><span class="o">.</span><span class="n">minimalistic_view</span> <span class="o">=</span> <span class="kc">True</span>
</span><span data-line="5">    <span class="n">GUI</span><span class="o">.</span><span class="n">hide_labels</span> <span class="o">=</span> <span class="kc">True</span>
</span><span data-line="6">    <span class="n">GUI</span><span class="o">.</span><span class="n">ray_count</span> <span class="o">=</span> <span class="mi">1000</span>
</span><span data-line="7">
</span><span data-line="8">    <span class="c1"># GUI properties were set, but the changes need to be processed</span>
</span><span data-line="9">    <span class="n">GUI</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
</span><span data-line="10">
</span><span data-line="11">    <span class="c1"># dome some other things</span>
</span><span data-line="12">    <span class="o">...</span>
</span><span data-line="13">
</span><span data-line="14"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="15"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="16"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>Note that some functions, like <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.replot" title="optrace.gui.trace_gui.TraceGUI.replot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.replot</span></code></a> also call <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.process" title="optrace.gui.trace_gui.TraceGUI.process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.process</span></code></a> internally.</p>
</section>
<section id="replotting">
<h2><span class="section-number">4.14.3. </span>Replotting<a class="headerlink" href="#replotting" title="Link to this heading">Â¶</a></h2>
<p>While <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.process" title="optrace.gui.trace_gui.TraceGUI.process"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.process</span></code></a> reacts to changes in the TraceGUI itself, it does not handle changes of the raytracer or tracing geometry.</p>
<p>When changing the geometry, the changes are not automatically applied to the scene.
The geometry is also not automatically raytraced.</p>
<p>To force the redrawing and retracing of the full scene, you can call <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.replot" title="optrace.gui.trace_gui.TraceGUI.replot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.replot</span></code></a>.</p>
<p>With the context manager <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.smart_replot" title="optrace.gui.trace_gui.TraceGUI.smart_replot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.smart_replot</span></code></a> it is possible to only update changed objects.
For instance, if a detector is moved, there is no need for updating the lenses inside the geometry or retracing the scene.
<a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.smart_replot" title="optrace.gui.trace_gui.TraceGUI.smart_replot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.smart_replot</span></code></a> handles the detection of changes and updating automatically.</p>
<p>Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">GUI</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># replot everything</span>
</span><span data-line="4">    <span class="n">GUI</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span>
</span><span data-line="5">
</span><span data-line="6">    <span class="c1"># do some actions and at the end replot only changed objects</span>
</span><span data-line="7">    <span class="c1"># and/or retrace the geometry if needed.</span>
</span><span data-line="8">    <span class="k">with</span> <span class="n">GUI</span><span class="o">.</span><span class="n">smart_replot</span><span class="p">():</span>
</span><span data-line="9">        <span class="n">some_action_1</span><span class="p">()</span>
</span><span data-line="10">
</span><span data-line="11"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="12"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="13"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>When controlling the TraceGUI through the CommandWindow of the GUI, there is also the option to replot all objects automatically.
The implementation is done internally in the same way by using <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.smart_replot" title="optrace.gui.trace_gui.TraceGUI.smart_replot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.smart_replot</span></code></a>.</p>
</section>
<section id="controlling-the-camera">
<span id="gui-camera"></span><h2><span class="section-number">4.14.4. </span>Controlling the Camera<a class="headerlink" href="#controlling-the-camera" title="Link to this heading">Â¶</a></h2>
<p>Controlling the camera is done with the functions <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.set_camera" title="optrace.gui.trace_gui.TraceGUI.set_camera"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.set_camera</span></code></a> and <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.get_camera" title="optrace.gui.trace_gui.TraceGUI.get_camera"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.get_camera</span></code></a>.
The former sets the properties, while the latter one returns a dictionary of the current settings.</p>
<p>The following settings are available:</p>
<div class="table-wrapper colwidths-given docutils container">
<table class="docutils align-left">
<colgroup>
<col style="width: 27.3%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code highlight python docutils literal highlight-python"><span class="n">center</span></code></p></td>
<td><p>3D coordinates of center of view in mm</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code highlight python docutils literal highlight-python"><span class="n">height</span></code></p></td>
<td><p>half of vertical visible scene height in mm</p></td>
</tr>
<tr class="row-even"><td><p><code class="code highlight python docutils literal highlight-python"><span class="n">direction</span></code></p></td>
<td><p>camera view direction vector (direction of vector perpendicular to your monitor and in your viewing direction)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code highlight python docutils literal highlight-python"><span class="n">roll</span></code></p></td>
<td><p>absolute camera roll angle in degrees</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can find example code below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">sim</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># store initial camera properties</span>
</span><span data-line="4">    <span class="n">cam_props</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">get_camera</span><span class="p">()</span>
</span><span data-line="5">
</span><span data-line="6">    <span class="c1"># change the center of the view as well as the scaling</span>
</span><span data-line="7">    <span class="n">sim</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mf">2.5</span><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9">    <span class="c1"># reset to initial view</span>
</span><span data-line="10">    <span class="n">sim</span><span class="o">.</span><span class="n">set_camera</span><span class="p">(</span><span class="o">**</span><span class="n">cam_props</span><span class="p">)</span>
</span><span data-line="11">
</span><span data-line="12"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="13"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="14"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>Applying camera properties at startup is possible using the <code class="code highlight python docutils literal highlight-python"><span class="n">initial_camera</span></code> parameter of the TraceGUI class.
This parameter is a dictionary that can include all possible parameters of function <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.set_camera" title="optrace.gui.trace_gui.TraceGUI.set_camera"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.set_camera</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">,</span> <span class="n">initial_camera</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">roll</span><span class="o">=</span><span class="mi">45</span><span class="p">))</span>
</span></pre></div>
</div>
</section>
<section id="taking-screenshots">
<h2><span class="section-number">4.14.5. </span>Taking Screenshots<a class="headerlink" href="#taking-screenshots" title="Link to this heading">Â¶</a></h2>
<p>The <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.screenshot" title="optrace.gui.trace_gui.TraceGUI.screenshot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.screenshot</span></code></a> function make it possible to capture screenshots of the scene.
A path string is required for this function.
The file type is determined automatically from the file name.</p>
<p>Internally, the <a class="reference external" href="https://docs.enthought.com/mayavi/mayavi/auto/mlab_figure.html#mayavi.mlab.savefig" title="(in mayavi v4.8.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mayavi.mlab.savefig</span></code></a> function from <a class="reference external" href="https://docs.enthought.com/mayavi/mayavi">mayavi</a> is utilized, therefore supporting this functionâ€™s additional parameters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">sim</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># default call</span>
</span><span data-line="4">    <span class="n">sim</span><span class="o">.</span><span class="n">screenshot</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">)</span>
</span><span data-line="5">
</span><span data-line="6">    <span class="c1"># call with additional parameters</span>
</span><span data-line="7">    <span class="n">sim</span><span class="o">.</span><span class="n">screenshot</span><span class="p">(</span><span class="s2">&quot;image2.png&quot;</span><span class="p">,</span> <span class="n">magnification</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="10"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="11"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>Note that the <code class="code highlight python docutils literal highlight-python"><span class="n">magnification</span></code> parameter leads to a rescaled scene, where some elements change their relative size.</p>
</section>
<section id="selecting-rays">
<span id="usage-gui-selecting-rays"></span><h2><span class="section-number">4.14.6. </span>Selecting Rays<a class="headerlink" href="#selecting-rays" title="Link to this heading">Â¶</a></h2>
<p>By default, a random selection of rays is displayed inside the scene where the number is specified by <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.rays_visible" title="optrace.gui.trace_gui.TraceGUI.rays_visible"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.rays_visible</span></code></a>.
A custom selection can be set using the function <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.select_rays" title="optrace.gui.trace_gui.TraceGUI.select_rays"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.select_rays</span></code></a>.
It takes a <code class="code highlight python docutils literal highlight-python"><span class="n">mask</span></code> parameter, which is a one-dimensional boolean <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="(in NumPy v2.3)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy.array</span></code></a>, and an optional <code class="code highlight python docutils literal highlight-python"><span class="n">max_show</span></code> parameter, that specified the maximum amount of rays to display.
Parameter <code class="code highlight python docutils literal highlight-python"><span class="n">mask</span></code> must have the same length as there are rays simulated, which is set by <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.ray_count" title="optrace.gui.trace_gui.TraceGUI.ray_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.ray_count</span></code></a>
Note that there is a maximum amount of rays that can be displayed (specified by the maximum value of <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.rays_visible" title="optrace.gui.trace_gui.TraceGUI.rays_visible"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.rays_visible</span></code></a>, by default <code class="code highlight python docutils literal highlight-python"><span class="mi">50000</span></code>).
If the <code class="code highlight python docutils literal highlight-python"><span class="n">mask</span></code> includes more values, a random subset is selected.
Accessing <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.ray_selection" title="optrace.gui.trace_gui.TraceGUI.ray_selection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.ray_selection</span></code></a> returns the boolean array for the currently displayed rays.</p>
<p>Typical useful scenarios are debugging or ray analysis.
For instance, only rays from a specific source, region or wavelength range can be selected and displayed.
See <a class="reference internal" href="advanced.html#usage-ray-access"><span class="std std-ref">Accessing Ray Properties</span></a> to learn how to access ray properties.
You can find examples for ray selections below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">GUI</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># display rays with wavelengths between 400 and 450nm</span>
</span><span data-line="4">    <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">GUI</span><span class="o">.</span><span class="n">raytracer</span><span class="o">.</span><span class="n">rays</span><span class="o">.</span><span class="n">wl_list</span> <span class="o">&gt;=</span> <span class="mi">400</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">GUI</span><span class="o">.</span><span class="n">raytracer</span><span class="o">.</span><span class="n">rays</span><span class="o">.</span><span class="n">wl_list</span> <span class="o">&lt;=</span> <span class="mi">450</span><span class="p">)</span>
</span><span data-line="5">    <span class="n">GUI</span><span class="o">.</span><span class="n">select_rays</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="c1"># no max_show provided, but might be limited by this function</span>
</span><span data-line="6">
</span><span data-line="7">    <span class="c1"># display 2000 rays that start at x &gt; 0</span>
</span><span data-line="8">    <span class="n">mask</span> <span class="o">=</span> <span class="n">GUI</span><span class="o">.</span><span class="n">raytracer</span><span class="o">.</span><span class="n">rays</span><span class="o">.</span><span class="n">p_list</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span data-line="9">    <span class="n">GUI</span><span class="o">.</span><span class="n">select_rays</span><span class="p">(</span><span class="n">mask</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2000</span><span class="p">)</span>  <span class="c1"># slicing with 0 so mask is 1D</span>
</span><span data-line="10">
</span><span data-line="11">    <span class="c1"># get mask for actually displayed selection</span>
</span><span data-line="12">    <span class="n">selection</span> <span class="o">=</span> <span class="n">GUI</span><span class="o">.</span><span class="n">ray_selection</span>
</span><span data-line="13">
</span><span data-line="14"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="15"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="16"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
</section>
<section id="picking-manually">
<h2><span class="section-number">4.14.7. </span>Picking Manually<a class="headerlink" href="#picking-manually" title="Link to this heading">Â¶</a></h2>
<p>The function <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.pick_ray" title="optrace.gui.trace_gui.TraceGUI.pick_ray"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.pick_ray</span></code></a> highlights a full ray.
An integer <code class="code highlight python docutils literal highlight-python"><span class="n">index</span></code> is required as to select a given ray.
Only currently displayed rays are pickable, which are defined by <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.ray_selection" title="optrace.gui.trace_gui.TraceGUI.ray_selection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.ray_selection</span></code></a>, see <a class="reference internal" href="#usage-gui-selecting-rays"><span class="std std-ref">Selecting Rays</span></a>.
So an <code class="code highlight python docutils literal highlight-python"><span class="n">index</span><span class="o">=</span><span class="mi">50</span></code> means that the 50th <code class="code highlight python docutils literal highlight-python"><span class="kc">True</span></code> value of <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.ray_selection" title="optrace.gui.trace_gui.TraceGUI.ray_selection"><code class="xref py py-attr docutils literal notranslate"><span class="pre">TraceGUI.ray_selection</span></code></a> is picked.</p>
<p>Function <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.pick_ray_section" title="optrace.gui.trace_gui.TraceGUI.pick_ray_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.pick_ray_section</span></code></a> highlights a ray at a given intersection.
The ray is highlighted, a crosshair is shown at the intersection position and a ray information text is shown inside the scene.
Compared to the previous function, an additional integer <code class="code highlight python docutils literal highlight-python"><span class="n">section</span></code> parameter is needed.
An optional parameter <code class="code highlight python docutils literal highlight-python"><span class="n">detailed</span></code> defines if more detailed information should be shown.
This would be equivalent to picking a section manually in the scene with the Shift key held.</p>
<p>To deactivate the ray highlighting, information text and cross hair, <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.reset_picking" title="optrace.gui.trace_gui.TraceGUI.reset_picking"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.reset_picking</span></code></a> needs to be called.</p>
<p>Here is an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">sim</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># pick the ray with index 100</span>
</span><span data-line="4">    <span class="n">sim</span><span class="o">.</span><span class="n">pick_ray</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</span><span data-line="5">
</span><span data-line="6">    <span class="c1"># pick ray section 2 of ray 50 with default view</span>
</span><span data-line="7">    <span class="n">sim</span><span class="o">.</span><span class="n">pick_ray_section</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">section</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span><span data-line="8">
</span><span data-line="9">    <span class="c1"># pick ray section with detailed view</span>
</span><span data-line="10">    <span class="n">sim</span><span class="o">.</span><span class="n">pick_ray_section</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">section</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">detailed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span data-line="11">
</span><span data-line="12">    <span class="c1"># reset (=hide) the picking view</span>
</span><span data-line="13">    <span class="n">sim</span><span class="o">.</span><span class="n">reset_picking</span><span class="p">()</span>
</span><span data-line="14">
</span><span data-line="15"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="16"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="17"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
</section>
<section id="showing-plots">
<h2><span class="section-number">4.14.8. </span>Showing Plots<a class="headerlink" href="#showing-plots" title="Link to this heading">Â¶</a></h2>
<p>Available plotting functions include <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.source_image" title="optrace.gui.trace_gui.TraceGUI.source_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.source_image</span></code></a> , <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.source_profile" title="optrace.gui.trace_gui.TraceGUI.source_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.source_profile</span></code></a>,
<a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.detector_image" title="optrace.gui.trace_gui.TraceGUI.detector_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.detector_image</span></code></a>, <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.detector_profile" title="optrace.gui.trace_gui.TraceGUI.detector_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.detector_profile</span></code></a>,
<a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.detector_spectrum" title="optrace.gui.trace_gui.TraceGUI.detector_spectrum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.detector_spectrum</span></code></a>, <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.source_spectrum" title="optrace.gui.trace_gui.TraceGUI.source_spectrum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.source_spectrum</span></code></a>,
<a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI.move_to_focus" title="optrace.gui.trace_gui.TraceGUI.move_to_focus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.move_to_focus</span></code></a>.</p>
<p>There are more settings available than through the GUI.
For example, it is possible to save a image to the disk.
Additionally, a custom detector/source extent can be specified, a setting not available through the GUI.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">sim</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># change plot settings</span>
</span><span data-line="4">    <span class="n">sim</span><span class="o">.</span><span class="n">image_pixels</span> <span class="o">=</span> <span class="mi">315</span>
</span><span data-line="5">    <span class="n">sim</span><span class="o">.</span><span class="n">image_mode</span> <span class="o">=</span> <span class="s2">&quot;Lightness (CIELUV)&quot;</span>
</span><span data-line="6">
</span><span data-line="7">    <span class="c1"># show a source profile with a user-defined extent</span>
</span><span data-line="8">    <span class="n">sim</span><span class="o">.</span><span class="n">source_profile</span><span class="p">(</span><span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">])</span>
</span><span data-line="9">
</span><span data-line="10">    <span class="c1"># save a detector image with higher dpi</span>
</span><span data-line="11">    <span class="n">sim</span><span class="o">.</span><span class="n">detector_image</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;detector.png&quot;</span><span class="p">,</span> <span class="n">sargs</span><span class="o">=</span><span class="p">(</span><span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">))</span>
</span><span data-line="12">
</span><span data-line="13">    <span class="c1"># example for an automated focus plots</span>
</span><span data-line="14">    <span class="n">sim</span><span class="o">.</span><span class="n">detector_index</span> <span class="o">=</span> <span class="mi">1</span>
</span><span data-line="15">    <span class="n">sim</span><span class="o">.</span><span class="n">source_index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span data-line="16">    <span class="n">sim</span><span class="o">.</span><span class="n">cost_function_plot</span> <span class="o">=</span> <span class="kc">True</span>
</span><span data-line="17">    <span class="n">sim</span><span class="o">.</span><span class="n">move_to_focus</span><span class="p">()</span>
</span><span data-line="18">
</span><span data-line="19"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="20"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="21"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
</section>
<section id="accessing-custom-ui-elements">
<span id="gui-automation-custom-ui"></span><h2><span class="section-number">4.14.9. </span>Accessing custom UI elements<a class="headerlink" href="#accessing-custom-ui-elements" title="Link to this heading">Â¶</a></h2>
<p>Custom elements are accessible through a name, consisting of their type and a chronological number.
The number corresponds to the order that the element has been created.
Assigning values works analogously to all other parameters.
To button action is called with a special function.</p>
<p>You can find examples below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">sim</span><span class="o">.</span><span class="n">custom_value_2</span> <span class="o">=</span> <span class="mf">4.5</span>
</span><span data-line="2"><span class="n">sim</span><span class="o">.</span><span class="n">custom_checkbox_1</span> <span class="o">=</span> <span class="kc">False</span>
</span><span data-line="3"><span class="n">sim</span><span class="o">.</span><span class="n">custom_selection_3</span> <span class="o">=</span> <span class="s2">&quot;Case 2&quot;</span>
</span><span data-line="4">
</span><span data-line="5"><span class="n">sim</span><span class="o">.</span><span class="n">custom_button_action_1</span><span class="p">()</span>
</span></pre></div>
</div>
</section>
<section id="closing-down">
<span id="gui-automation-close"></span><h2><span class="section-number">4.14.10. </span>Closing Down<a class="headerlink" href="#closing-down" title="Link to this heading">Â¶</a></h2>
<p>To close the GUI down programmatically, the function <a class="reference internal" href="../reference/optrace_gui.html#optrace.gui.trace_gui.TraceGUI" title="optrace.gui.trace_gui.TraceGUI"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TraceGUI.close</span></code></a> can be called:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="k">def</span><span class="w"> </span><span class="nf">automated</span><span class="p">(</span><span class="n">sim</span><span class="p">):</span>
</span><span data-line="2">
</span><span data-line="3">    <span class="c1"># do some things</span>
</span><span data-line="4">    <span class="o">...</span>
</span><span data-line="5">
</span><span data-line="6">    <span class="c1"># close everything down</span>
</span><span data-line="7">    <span class="n">sim</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span data-line="8">
</span><span data-line="9"><span class="c1"># create the GUI and provide the automation function to TraceGUI.control()</span>
</span><span data-line="10"><span class="n">sim</span> <span class="o">=</span> <span class="n">TraceGUI</span><span class="p">(</span><span class="n">RT</span><span class="p">)</span>
</span><span data-line="11"><span class="n">sim</span><span class="o">.</span><span class="n">control</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">automated</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sim</span><span class="p">,))</span>
</span></pre></div>
</div>
<p>This will close all GUI and plotting windows and exit all background tasks.</p>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="gui.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title"><span class="section-number">4.13. </span>GUI Interaction</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="advanced.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title"><span class="section-number">4.15. </span>Advanced Topics</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright">
      &copy; 2025, Damian Mendroch &nbsp;  &nbsp; 
      <a href="../impressum.html" style="color: var(--pst-color-text-muted)">Impressum</a>
      &nbsp; &nbsp; 
      <a href="../impressum.html" style="color: var(--pst-color-text-muted)">Legal Notice</a>
      <br>
  
    </div>
    <div class="sy-foot-copyright">
      <p>
        Made with
    
        <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
        <a href="https://shibuya.lepture.com">Shibuya theme</a>.
      </p>
    </div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=5b045848"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/shibuya.js?v=e730760c"></script></body>
</html>