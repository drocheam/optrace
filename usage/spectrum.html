<!DOCTYPE html>
<html lang="en" data-accent-color="cyan" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>4.7. Spectrum Classes - optrace 1.7.5 documentation</title><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="4.8. Image Classes" href="image.html" /><link rel="prev" title="4.6. Refractive Indices" href="refraction_index.html" />
      <link rel="canonical" href="https://drocheam.github.io/optrace/usage/spectrum.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"dark");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=d48c410d" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=81da21d3" />
    <!--intentionally blank so there are no external fonts loaded-->
    <meta property="og:type" content="website"/>
<meta property="og:url" content="https://drocheam.github.io/optrace/usage/spectrum.html"/>
<meta property="og:title" content="4.7. Spectrum Classes"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      
      
      <strong>optrace</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"><ul><li class="link"><a href=".././examples.html">Examples</a></li><li class="link"><a href=".././installation.html">Installation</a></li><li class="link"><a href=".././usage/index.html">User Guide</a></li><li class="link">
          <a href="https://github.com/drocheam/optrace">
            <span>GitHub Repo</span></a>
        </li></ul></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><!--custom github logo so we don't need to connect to some icon provider-->
<div class="sy-head-socials"><a href="https://github.com/drocheam/optrace" aria-label="GitHub">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
  <a href="https://github.com/drocheam/optrace/releases" aria-label="Releases">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package-icon lucide-package"><path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"/><path d="M12 22V12"/><polyline points="3.29 7 12 12 20.71 7"/><path d="m7.5 4.27 9 5.15"/></svg>
  </a>
</div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../examples.html">1. Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">3. Quickstart</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">4.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="surfaces.html">4.2. Base Shapes (Surface, Line, Point)</a></li>
<li class="toctree-l2"><a class="reference internal" href="elements.html">4.3. Elements (Lens, Ray Source,  â€¦)</a></li>
<li class="toctree-l2"><a class="reference internal" href="group.html">4.4. Geometry Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="raytracer.html">4.5. Raytracer</a></li>
<li class="toctree-l2"><a class="reference internal" href="refraction_index.html">4.6. Refractive Indices</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.7. Spectrum Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="image.html">4.8. Image Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="focus.html">4.9. Focus Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="tma.html">4.10. Paraxial Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="convolve.html">4.11. PSF Convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">4.12. Plotting Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui.html">4.13. GUI Interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_automation.html">4.14. GUI Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html">4.15. Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../details/index.html">5. Implementation Details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../details/sampling.html">5.1. Property Sampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/tracing.html">5.2. Tracing Procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/hurb.html">5.3. Heisenberg Uncertainty Ray Bending</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/image_spectrum.html">5.4. Image and Spectrum Rendering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/matrix_analysis.html">5.5. Ray Transfer Matrix Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/convolution.html">5.6. PSF Convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/focus.html">5.7. Focus Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/color.html">5.8. Color Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../details/misc.html">5.9. Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">6. API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/structure.html">6.1. Library Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace.html">6.2. Global Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer.html">6.3. tracer Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_color.html">6.4. tracer.color Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_geometry.html">6.5. tracer.geometry Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_geometry_surface.html">6.6. tracer.geometry.surface Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_image.html">6.7. tracer.image Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_spectrum.html">6.8. tracer.spectrum Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_tracer_presets.html">6.9. tracer.presets Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_plots.html">6.10. plots Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/optrace_gui.html">6.11. gui Submodule</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">7. Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/testing.html">7.1. Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/documentation.html">7.2. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/packaging.html">7.3. Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/notes.html">7.4. Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/changelog.html">7.5. Changelog</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#lightspectrum">4.7.1. LightSpectrum</a><ul>
<li><a class="reference internal" href="#creating-the-spectrum">4.7.1.1. Creating the Spectrum</a></li>
<li><a class="reference internal" href="#calculating-spectral-values">4.7.1.2. Calculating Spectral Values</a></li>
<li><a class="reference internal" href="#wavelength-characteristics">4.7.1.3. Wavelength Characteristics</a></li>
<li><a class="reference internal" href="#power">4.7.1.4. Power</a></li>
<li><a class="reference internal" href="#rendering-a-lightspectrum">4.7.1.5. Rendering a LightSpectrum</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transmissionspectrum">4.7.2. TransmissionSpectrum</a></li>
<li><a class="reference internal" href="#spectrum">4.7.3. Spectrum</a></li>
<li><a class="reference internal" href="#plotting">4.7.4. Plotting</a></li>
<li><a class="reference internal" href="#spectral-lines-presets">4.7.5. Spectral Lines Presets</a></li>
<li><a class="reference internal" href="#spectrum-presets">4.7.6. Spectrum Presets</a></li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">optrace</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name"><span class="section-number">4. </span>User Guide</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name"><span class="section-number">4.7. </span>Spectrum Classes</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="spectrum-classes">
<span id="usage-spectrum"></span><h1><span class="section-number">4.7. </span>Spectrum Classes<a class="headerlink" href="#spectrum-classes" title="Link to this heading">Â¶</a></h1>
<section id="lightspectrum">
<h2><span class="section-number">4.7.1. </span>LightSpectrum<a class="headerlink" href="#lightspectrum" title="Link to this heading">Â¶</a></h2>
<p>A <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> defines wavelength-dependent emittance of light, with all spectral values being <span class="math notranslate nohighlight">\(\geq 0\)</span>.
<a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> objects are needed when creating a <a class="reference internal" href="../reference/optrace_tracer_geometry.html#optrace.tracer.geometry.ray_source.RaySource" title="optrace.tracer.geometry.ray_source.RaySource"><code class="xref py py-class docutils literal notranslate"><span class="pre">RaySource</span></code></a> or to render spectral distribution of detectors.</p>
<section id="creating-the-spectrum">
<h3><span class="section-number">4.7.1.1. </span>Creating the Spectrum<a class="headerlink" href="#creating-the-spectrum" title="Link to this heading">Â¶</a></h3>
<p><strong>Units</strong></p>
<p>For line spectra (modes <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Monochromatic&quot;</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Lines&quot;</span></code>) the spectral unit are Watts,
while for all other modes the spectral power density is given as unit W/nm.
Distribution and shape parameters (<code class="code highlight python docutils literal highlight-python"><span class="n">val</span><span class="p">,</span> <span class="n">line_vals</span><span class="p">,</span> <span class="o">...</span></code>) are given in the same units.
For spectra used in raytracing, the absolute scaling is unimportant,
as the values will be rescaled by the parent ray source, which specifies the overall power.</p>
<p><strong>Constant</strong></p>
<p>This mode defines a constant spectrum with value <code class="code highlight python docutils literal highlight-python"><span class="n">val</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Constant&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">12.3</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Monochromatic</strong></p>
<p>This mode implements a monochromatic source with wavelength <code class="code highlight python docutils literal highlight-python"><span class="n">wl</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Monochromatic&quot;</span><span class="p">,</span> <span class="n">wl</span><span class="o">=</span><span class="mf">423.56</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Lines</strong></p>
<p>A line spectrum consist of multiple monochromatic sources.
The argument <code class="code highlight python docutils literal highlight-python"><span class="n">lines</span></code> is a list of wavelengths, while <code class="code highlight python docutils literal highlight-python"><span class="n">line_vals</span></code> is a list with the same number
of elements describing the height/power of each wavelength.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Lines&quot;</span><span class="p">,</span> <span class="n">lines</span><span class="o">=</span><span class="p">[</span><span class="mi">458</span><span class="p">,</span> <span class="mi">523</span><span class="p">,</span> <span class="mf">729.6</span><span class="p">],</span> <span class="n">line_vals</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
</span></pre></div>
</div>
<p><strong>Rectangle</strong></p>
<p>The following equations defines a spectrum with a rectangular function with bounds <code class="code highlight python docutils literal highlight-python"><span class="n">wl0</span></code>,
<code class="code highlight python docutils literal highlight-python"><span class="n">wl1</span></code> and a scaling factor <code class="code highlight python docutils literal highlight-python"><span class="n">val</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span> <span class="n">wl0</span><span class="o">=</span><span class="mi">520</span><span class="p">,</span> <span class="n">wl1</span><span class="o">=</span><span class="mi">689</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Gaussian</strong></p>
<p>A Gaussian spectrum is modelled mathematically with a scaling factor <span class="math notranslate nohighlight">\(S_0\)</span>,
a center wavelength <span class="math notranslate nohighlight">\(\lambda_0\)</span> and a standard deviation <span class="math notranslate nohighlight">\(\sigma_\lambda\)</span>:</p>
<div class="math-wrapper docutils container" id="equation-eq-spectrum-gauss">
<div class="math notranslate nohighlight" id="equation-eq-spectrum-gauss">
<span class="eqno">(4.18)<a class="headerlink" href="#equation-eq-spectrum-gauss" title="Link to this equation">Â¶</a></span>\[S(\lambda) = S_0 \exp \left( -\frac{\left(\lambda - \lambda_0\right)^2}{2 \sigma_\lambda^2}\right)\]</div>
</div>
<p>The spectrum object is created with mode <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Gaussian&quot;</span></code>, a mean value <code class="code highlight python docutils literal highlight-python"><span class="n">mu</span></code>
and standard deviation <code class="code highlight python docutils literal highlight-python"><span class="n">sig</span></code>, all given in nanometers.
Note that the Gaussian function will be truncated to the visible range [380nm, 780nm].</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Gaussian&quot;</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">478</span><span class="p">,</span> <span class="n">sig</span><span class="o">=</span><span class="mf">23.5</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.89</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Blackbody Radiator</strong></p>
<p>The spectral radiance of a blackbody according to Planckâ€™s Law is given as: <a class="footnote-reference brackets" href="#footcite-planckwiki" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
<div class="math-wrapper docutils container" id="equation-planck-radiator">
<div class="math notranslate nohighlight" id="equation-planck-radiator">
<span class="eqno">(4.19)<a class="headerlink" href="#equation-planck-radiator" title="Link to this equation">Â¶</a></span>\[B_\lambda (\lambda, ~T) = \frac{2 h c^2}{\lambda^5} \frac{1}{\exp\left(\frac{h  c }
{\lambda k_\text{B}  T}\right) - 1}\]</div>
</div>
<p>The equation contains the speed of light <span class="math notranslate nohighlight">\(c\)</span>, the Planck constant <span class="math notranslate nohighlight">\(h\)</span>
and the Boltzmann constant <span class="math notranslate nohighlight">\(k_\text{B}\)</span>:</p>
<div class="math-wrapper docutils container" id="equation-usage-spectrum-0">
<div class="math notranslate nohighlight" id="equation-usage-spectrum-0">
<span class="eqno">(4.20)<a class="headerlink" href="#equation-usage-spectrum-0" title="Link to this equation">Â¶</a></span>\[\begin{split}c =&amp;~ 299792458 ~\text{m/s}\\
h =&amp;~ 6.62607015\cdot 10^{-34} ~\text{J s}\\
k_\text{B} =&amp;~ 1.380649 \cdot 10^{-23} ~\text{J/K}\\\end{split}\]</div>
</div>
<p>Note that <span class="math notranslate nohighlight">\(\lambda\)</span> must be specified in meters in the above equation.</p>
<aside class="topic">
<p class="topic-title">Note</p>
<p>The spectral radiance <span class="math notranslate nohighlight">\(B_\lambda\)</span> (Power per solid angle, source area and wavelength) is given in units
<span class="math notranslate nohighlight">\(\text{W}/(\text{m}^3~\text{sr})\)</span>, whereas the units in this class should be <span class="math notranslate nohighlight">\(\text{W/nm}\)</span>
(Power per wavelength). Since <span class="math notranslate nohighlight">\(B_\lambda\)</span> is constant over the source area and angle independent,
converting it corresponds to a simple rescaling.</p>
</aside>
<p>There is an option to normalize the spectrum, so the peak value equals one.
This can prove useful for plotting the spectrum.
If the peak wavelength is inside the visible range, then the Stefanâ€“Boltzmann
law can be applied to calculate the normalization factor.
Otherwise the maximum value will lie at one of the edges of the visible range.</p>
<p>A blackbody radiator, following Planckâ€™s law, with a specific temperature of <code class="code highlight python docutils literal highlight-python"><span class="n">T</span></code> in Kelvin, is initialized as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Blackbody&quot;</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">3890</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</span></pre></div>
</div>
<p>The <code class="code highlight python docutils literal highlight-python"><span class="n">val</span></code> parameter defines the peak value in W/nm.</p>
<p><strong>User Function/Data</strong></p>
<p>With the Data/Function mode, the spectrum is modelled by a user function/ data set.
With a dataset, the data will be linearly interpolated.</p>
<p>This function requires a wavelength array in nm as input and returns a numpy array of the same shape.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Function&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">wl</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">wl</span> <span class="o">-</span> <span class="mi">520</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span></pre></div>
</div>
<p>If a function with multiple parameters is utilized, additional arguments can be provided
in the <code class="code highlight python docutils literal highlight-python"><span class="n">func_args</span></code> parameter dictionary.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Function&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">wl</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">wl</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">func_args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">489</span><span class="p">))</span>
</span></pre></div>
</div>
<p>For discrete datasets, the <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Data&quot;</span></code> mode proves useful.
In this case the <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> constructor takes a wavelength array <code class="code highlight python docutils literal highlight-python"><span class="n">wls</span></code>
and a value array <code class="code highlight python docutils literal highlight-python"><span class="n">vals</span></code> as arguments, where both must be of the exact same one-dimensional shape.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">wls</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">450</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</span><span data-line="2"><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">wls</span><span class="o">/</span><span class="mi">500</span><span class="p">)</span>
</span><span data-line="3">
</span><span data-line="4"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">LightSpectrum</span><span class="p">(</span><span class="s2">&quot;Data&quot;</span><span class="p">,</span> <span class="n">wls</span><span class="o">=</span><span class="n">wls</span><span class="p">,</span> <span class="n">vals</span><span class="o">=</span><span class="n">vals</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Note that <code class="code highlight python docutils literal highlight-python"><span class="n">wls</span></code> needs to be monotonically increasing with the same step size
and needs to be inside the visible range [380nm, 780nm].</p>
<p><strong>Histogram</strong></p>
<p>This spectrum type is not user created, but is rendered on a detector or source.
It consists of a list of bins and bin values.</p>
</section>
<section id="calculating-spectral-values">
<h3><span class="section-number">4.7.1.2. </span>Calculating Spectral Values<a class="headerlink" href="#calculating-spectral-values" title="Link to this heading">Â¶</a></h3>
<p>The <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> object can be called with a wavelength array to calculate the spectral values:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">wl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="p">(</span><span class="n">wl</span><span class="p">)</span>
</span><span data-line="3"><span class="go">array([0.        , 0.        , 0.62160997, 0.58168242, 0.54030231])</span>
</span></pre></div>
</div>
</section>
<section id="wavelength-characteristics">
<h3><span class="section-number">4.7.1.3. </span>Wavelength Characteristics<a class="headerlink" href="#wavelength-characteristics" title="Link to this heading">Â¶</a></h3>
<div class="table-wrapper colwidths-given docutils container" id="id4">
<table class="docutils align-center" id="id4">
<caption><span class="caption-number">Table 4.4 </span><span class="caption-text">Wavelength characteristics functions</span><a class="headerlink" href="#id4" title="Link to this table">Â¶</a></caption>
<colgroup>
<col style="width: 28.6%" />
<col style="width: 11.9%" />
<col style="width: 59.5%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum.peak_wavelength" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum.peak_wavelength"><code class="xref py py-meth docutils literal notranslate"><span class="pre">peak_wavelength</span></code></a></p></td>
<td><p>nm</p></td>
<td><p>wavelength for the spectral peak</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum.centroid_wavelength" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum.centroid_wavelength"><code class="xref py py-meth docutils literal notranslate"><span class="pre">centroid_wavelength</span></code></a></p></td>
<td><p>nm</p></td>
<td><p>power-weighted average wavelength, see <a class="reference external" href="https://en.wikipedia.org/wiki/Spectral_centroid">Centroid Wavelength</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum.fwhm" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum.fwhm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fwhm</span></code></a></p></td>
<td><p>nm</p></td>
<td><p>full-width-at-half-maximum wavelength range</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum.dominant_wavelength" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum.dominant_wavelength"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dominant_wavelength</span></code></a></p></td>
<td><p>nm</p></td>
<td><div class="line-block">
<div class="line">same hue wavelength, see <a class="reference external" href="https://en.wikipedia.org/wiki/Dominant_wavelength">Dominant Wavelength</a></div>
<div class="line"><code class="code highlight python docutils literal highlight-python"><span class="n">np</span><span class="o">.</span><span class="n">nan</span></code> if not existent</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum.complementary_wavelength" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum.complementary_wavelength"><code class="xref py py-meth docutils literal notranslate"><span class="pre">complementary_wavelength</span></code></a></p></td>
<td><p>nm</p></td>
<td><div class="line-block">
<div class="line">opposite hue wavelength, see <a class="reference external" href="https://en.wikipedia.org/wiki/Dominant_wavelength">Dominant Wavelength</a></div>
<div class="line"><code class="code highlight python docutils literal highlight-python"><span class="n">np</span><span class="o">.</span><span class="n">nan</span></code> if non-existent</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<p>For instance, we can calculate the peak wavelength of the LED B1 standard illuminant by doing:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.</span><span class="n">led_b1</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">peak_wavelength</span><span class="p">()</span>
</span><span data-line="3"><span class="go">605.00225...</span>
</span></pre></div>
</div>
<p>Note that with multiple same height peaks or a broad constant peak region the first peak value will be returned.</p>
<p>The centroid wavelength for the spectrum is:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">centroid_wavelength</span><span class="p">()</span>
</span><span data-line="2"><span class="go">592.39585...</span>
</span></pre></div>
</div>
<p>The dominant wavelength is calculated using:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">dominant_wavelength</span><span class="p">()</span>
</span><span data-line="2"><span class="go">584.75088...</span>
</span></pre></div>
</div>
<p>When dominant or complementary are not existent (e.g. magenta canâ€™t be described by a wavelength),
the values are set to NaN (not a number).
You can find a visualization on both dominant and complementary wavelengths
<a class="reference external" href="https://en.wikipedia.org/wiki/Dominant_wavelength">on this Wiki page</a>.</p>
<p>The FWHM (full width at half maximum) is calculated usin:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">fwhm</span><span class="p">()</span>
</span><span data-line="2"><span class="go">129.18529...</span>
</span></pre></div>
</div>
<p>The method calculates the smallest FWHM around the highest peak.
While it is possible to calculate this value for all spectral shapes, it is only meaningful
as width characterization for functions with a distinctive peak and an outward fall-off.
For instance this metric does not make sense for a spectrum consisting of multiple separated bell-shaped curves.</p>
</section>
<section id="power">
<h3><span class="section-number">4.7.1.4. </span>Power<a class="headerlink" href="#power" title="Link to this heading">Â¶</a></h3>
<p>The spectral power can be calculated with:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">power</span><span class="p">()</span>
</span><span data-line="2"><span class="go">3206.9749...</span>
</span></pre></div>
</div>
<p>And the luminous power in lumen units with:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">luminous_power</span><span class="p">()</span>
</span><span data-line="2"><span class="go">999886.86...</span>
</span></pre></div>
</div>
</section>
<section id="rendering-a-lightspectrum">
<h3><span class="section-number">4.7.1.5. </span>Rendering a LightSpectrum<a class="headerlink" href="#rendering-a-lightspectrum" title="Link to this heading">Â¶</a></h3>
<p>Read section <a class="reference internal" href="image.html#rimage-rendering"><span class="std std-ref">Rendering a RenderImage</span></a> for details on rendering images, rendering spectra is done in a similar way.
Analogously to rendering a source image, we can render a spectrum with
<a class="reference internal" href="../reference/optrace_tracer.html#optrace.tracer.raytracer.Raytracer.source_spectrum" title="optrace.tracer.raytracer.Raytracer.source_spectrum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">source_spectrum</span></code></a>
and by providing a <code class="code highlight python docutils literal highlight-python"><span class="n">source_index</span></code> parameter (default to zero).
With a raytracer object <code class="code highlight python docutils literal highlight-python"><span class="n">RT</span></code>, a source spectrum from source 1 is rendered with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">RT</span><span class="o">.</span><span class="n">source_spectrum</span><span class="p">(</span><span class="n">source_index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>
</div>
<p>For a detector spectrum the <a class="reference internal" href="../reference/optrace_tracer.html#optrace.tracer.raytracer.Raytracer.detector_spectrum" title="optrace.tracer.raytracer.Raytracer.detector_spectrum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detector_spectrum</span></code></a>
function is applied.
It takes a <code class="code highlight python docutils literal highlight-python"><span class="n">detector_index</span></code> argument, that defaults to zero.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">RT</span><span class="o">.</span><span class="n">detector_spectrum</span><span class="p">(</span><span class="n">detector_index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Additionally we can render only a specific source by providing a <code class="code highlight python docutils literal highlight-python"><span class="n">source_index</span></code>
or limit the detector area by providing the <code class="code highlight python docutils literal highlight-python"><span class="n">extent</span></code> parameter, as we did for
the <a class="reference internal" href="../reference/optrace_tracer.html#optrace.tracer.raytracer.Raytracer.detector_image" title="optrace.tracer.raytracer.Raytracer.detector_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detector_image</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">RT</span><span class="o">.</span><span class="n">detector_spectrum</span><span class="p">(</span><span class="n">detector_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">source_index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span></pre></div>
</div>
<p>The above methods return a <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a>
object with type <code class="code highlight python docutils literal highlight-python"><span class="n">spectrum_type</span><span class="o">=</span><span class="s2">&quot;Histogram&quot;</span></code>.</p>
</section>
</section>
<section id="transmissionspectrum">
<h2><span class="section-number">4.7.2. </span>TransmissionSpectrum<a class="headerlink" href="#transmissionspectrum" title="Link to this heading">Â¶</a></h2>
<p>The <a class="reference internal" href="../reference/optrace_tracer_geometry.html#optrace.tracer.geometry.filter.Filter" title="optrace.tracer.geometry.filter.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a> class requires a <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum" title="optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransmissionSpectrum</span></code></a>.
All relative transmission values need to be inside the [0, 1] range.
The <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum" title="optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransmissionSpectrum</span></code></a> provides less modes than the <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> class.
Compared to the latter, the scaling factor <code class="code highlight python docutils literal highlight-python"><span class="n">vall</span></code> now becomes important.
This class defines a new <code class="code highlight python docutils literal highlight-python"><span class="n">inverse</span></code> parameter, that subtracts the defined function from a value of one.
This has the effect of turning the transmittance behavior into absorptance.
A Gaussian bandpass becomes a notch filter, a rectangular bandpass a rectangular blocking filter.</p>
<p><strong>Constant</strong></p>
<p>A neutral density filter is defined with mode <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Constant&quot;</span></code> and the linear transmittance value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Constant&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Gaussian</strong></p>
<p>Colored filters (most commonly bandpass filters) can be created with a Gaussian function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Gaussian&quot;</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span> <span class="n">sig</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>
</div>
<p>A Gaussian notch filter is easily defined with parameter <code class="code highlight python docutils literal highlight-python"><span class="n">inverse</span><span class="o">=</span><span class="kc">True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Gaussian&quot;</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span> <span class="n">sig</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>Rectangle</strong></p>
<p>A rectangular pass filter is modelled by a rectangular function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span> <span class="n">wl0</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">wl1</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</span></pre></div>
</div>
<p>A rectangular blocking filter can be defined with <code class="code highlight python docutils literal highlight-python"><span class="n">inverse</span><span class="o">=</span><span class="kc">True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span> <span class="n">wl0</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">wl1</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Creating an edgepass filter becomes easy by setting the bound to the edge of the visible range.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">spec</span> <span class="o">=</span> <span class="n">ot</span><span class="o">.</span><span class="n">TransmissionSpectrum</span><span class="p">(</span><span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span> <span class="n">wl0</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">wl1</span><span class="o">=</span><span class="mi">780</span><span class="p">)</span>
</span></pre></div>
</div>
<p><strong>User Data/Function</strong></p>
<p>Creating a <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum" title="optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransmissionSpectrum</span></code></a> with discrete data is equivalent to a <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a>.
However, all function/data values need to be inside the range [0, 1].</p>
<p><strong>Getting Spectral Values</strong></p>
<p>As for the <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> object, we can get the spectral values with:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">wl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="p">(</span><span class="n">wl</span><span class="p">)</span>
</span><span data-line="3"><span class="go">array([0., 0., 0., 1., 1.])</span>
</span></pre></div>
</div>
</section>
<section id="spectrum">
<h2><span class="section-number">4.7.3. </span>Spectrum<a class="headerlink" href="#spectrum" title="Link to this heading">Â¶</a></h2>
<p><a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.spectrum.Spectrum" title="optrace.tracer.spectrum.spectrum.Spectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spectrum</span></code></a> is the parent class of both <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a> and <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum" title="optrace.tracer.spectrum.transmission_spectrum.TransmissionSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransmissionSpectrum</span></code></a>.
It defines the following modes:
<code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Monochromatic&quot;</span><span class="p">,</span> <span class="s2">&quot;Rectangle&quot;</span><span class="p">,</span> <span class="s2">&quot;List&quot;</span><span class="p">,</span> <span class="s2">&quot;Function&quot;</span><span class="p">,</span> <span class="s2">&quot;Data&quot;</span><span class="p">,</span> <span class="s2">&quot;Gaussian&quot;</span><span class="p">,</span> <span class="s2">&quot;Constant&quot;</span></code>.
Compared to <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a>, only modes <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Histogram&quot;</span></code> and <code class="code highlight python docutils literal highlight-python"><span class="s2">&quot;Blackbody&quot;</span></code> are missing.
Generally the <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.spectrum.Spectrum" title="optrace.tracer.spectrum.spectrum.Spectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spectrum</span></code></a> class is not exposed to the user.
But, for instance, the color matching functions
<code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectrum</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectrum</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectrum</span><span class="o">.</span><span class="n">z</span></code> are objects of this type.</p>
</section>
<section id="plotting">
<h2><span class="section-number">4.7.4. </span>Plotting<a class="headerlink" href="#plotting" title="Link to this heading">Â¶</a></h2>
<p>See <a class="reference internal" href="plots.html#spectrum-plots"><span class="std std-ref">Spectrum Plotting</span></a>.</p>
</section>
<section id="spectral-lines-presets">
<span id="spectral-lines"></span><h2><span class="section-number">4.7.5. </span>Spectral Lines Presets<a class="headerlink" href="#spectral-lines-presets" title="Link to this heading">Â¶</a></h2>
<p>optrace provides some spectral wavelength lines in its presets.</p>
<div class="table-wrapper colwidths-given docutils container" id="id5">
<table class="docutils align-center" id="id5">
<caption><span class="caption-number">Table 4.5 </span><span class="caption-text">Fraunhofer lines commonly used for Abbe number determination <a class="footnote-reference brackets" href="#footcite-abbewiki" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></span><a class="headerlink" href="#id5" title="Link to this table">Â¶</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><div class="line-block">
<div class="line">Wavelength</div>
<div class="line">in nm</div>
</div>
</th>
<th class="head"><p>Element</p></th>
<th class="head"><p>Color</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>h</p></td>
<td><p>404.6561</p></td>
<td><p>Hg</p></td>
<td><p>violet</p></td>
</tr>
<tr class="row-odd"><td><p>g</p></td>
<td><p>435.8343</p></td>
<td><p>Hg</p></td>
<td><p>blue</p></td>
</tr>
<tr class="row-even"><td><p>Fâ€™</p></td>
<td><p>479.9914</p></td>
<td><p>Cd</p></td>
<td><p>blue</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>486.1327</p></td>
<td><p>H</p></td>
<td><p>blue</p></td>
</tr>
<tr class="row-even"><td><p>e</p></td>
<td><p>546.0740</p></td>
<td><p>Hg</p></td>
<td><p>green</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>587.5618</p></td>
<td><p>He</p></td>
<td><p>yellow</p></td>
</tr>
<tr class="row-even"><td><p>D</p></td>
<td><p>589.2938</p></td>
<td><p>Na</p></td>
<td><p>yellow</p></td>
</tr>
<tr class="row-odd"><td><p>Câ€™</p></td>
<td><p>643.8469</p></td>
<td><p>Cd</p></td>
<td><p>red</p></td>
</tr>
<tr class="row-even"><td><p>C</p></td>
<td><p>656.272</p></td>
<td><p>H</p></td>
<td><p>red</p></td>
</tr>
<tr class="row-odd"><td><p>r</p></td>
<td><p>706.5188</p></td>
<td><p>He</p></td>
<td><p>red</p></td>
</tr>
<tr class="row-even"><td><p>Aâ€™</p></td>
<td><p>768.2</p></td>
<td><p>K</p></td>
<td><p>IR-A</p></td>
</tr>
</tbody>
</table>
</div>
<p>Due to limitations in python variable names, presets with a trailing apostrophe are named with an trailing underscore.
For instance, Fâ€™ is named <code class="code highlight python docutils literal highlight-python"><span class="n">F_</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectral_lines</span><span class="o">.</span><span class="n">F_</span>
</span><span data-line="2"><span class="go">479.9914</span>
</span></pre></div>
</div>
<p>The most common wavelength combinations for Abbe numbers are FdC, FDC, FeC and Fâ€™eCâ€™.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectral_lines</span><span class="o">.</span><span class="n">F_eC_</span>
</span><span data-line="2"><span class="go">[479.9914, 546.074, 643.8469]</span>
</span></pre></div>
</div>
<p>The following table provides the dominant wavelengths of the sRGB primaries (ITU-R BT.709).
Dimensioning the scaling factors in the provided way produces D65 sRGB-white for equal R, G, B mixing ratios.</p>
<div class="table-wrapper colwidths-given docutils container" id="id6">
<table class="docutils align-center" id="id6">
<caption><span class="caption-number">Table 4.6 </span><span class="caption-text">Dominant wavelengths of sRGB primaries. Derived by optimization.</span><a class="headerlink" href="#id6" title="Link to this table">Â¶</a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><div class="line-block">
<div class="line">Wavelength</div>
<div class="line">in nm</div>
</div>
</th>
<th class="head"><p>Scaling Factor</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R</p></td>
<td><p>611.2826</p></td>
<td><p>0.5745000</p></td>
</tr>
<tr class="row-odd"><td><p>G</p></td>
<td><p>549.1321</p></td>
<td><p>0.5985758</p></td>
</tr>
<tr class="row-even"><td><p>B</p></td>
<td><p>464.3118</p></td>
<td><p>0.3895581</p></td>
</tr>
</tbody>
</table>
</div>
<p>These wavelengths are useful for simulating color mixing.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectral_lines</span><span class="o">.</span><span class="n">rgb</span>
</span><span data-line="2"><span class="go">[464.3118, 549.1321, 611.2826]</span>
</span></pre></div>
</div>
</section>
<section id="spectrum-presets">
<h2><span class="section-number">4.7.6. </span>Spectrum Presets<a class="headerlink" href="#spectrum-presets" title="Link to this heading">Â¶</a></h2>
<p>The following figures demonstrate the predefined presets for <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.spectrum.Spectrum" title="optrace.tracer.spectrum.spectrum.Spectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spectrum</span></code></a> and <a class="reference internal" href="../reference/optrace_tracer_spectrum.html#optrace.tracer.spectrum.light_spectrum.LightSpectrum" title="optrace.tracer.spectrum.light_spectrum.LightSpectrum"><code class="xref py py-class docutils literal notranslate"><span class="pre">LightSpectrum</span></code></a>.</p>
<div class="table-wrapper colwidths-given table-borderless docutils container">
<table class="table-borderless docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><figure class="align-center" id="id7">
<a class="dark-light reference internal image-reference" href="../_images/Standard_illuminants.svg"><img alt="../_images/Standard_illuminants.svg" class="dark-light" src="../_images/Standard_illuminants.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4.27 </span><span class="caption-text">CIE standard illuminants. Available as
<code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">a</span><span class="p">,</span> <span class="n">d50</span><span class="p">,</span> <span class="o">...</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code></span><a class="headerlink" href="#id7" title="Link to this image">Â¶</a></p>
</figcaption>
</figure>
</td>
<td><figure class="align-center" id="id8">
<a class="dark-light reference internal image-reference" href="../_images/LED_illuminants.svg"><img alt="../_images/LED_illuminants.svg" class="dark-light" src="../_images/LED_illuminants.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4.28 </span><span class="caption-text">CIE standard illuminants LED series. Available as
<code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">led_b1</span><span class="p">,</span> <span class="n">led_b2</span><span class="p">,</span> <span class="o">...</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code></span><a class="headerlink" href="#id8" title="Link to this image">Â¶</a></p>
</figcaption>
</figure>
</td>
</tr>
<tr class="row-even"><td><figure class="align-center" id="id9">
<span id="fig-led-illuminants"></span><a class="dark-light reference internal image-reference" href="../_images/Fluor_illuminants.svg"><img alt="../_images/Fluor_illuminants.svg" class="dark-light" src="../_images/Fluor_illuminants.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4.29 </span><span class="caption-text">CIE standard illuminants Fluorescent series. Available as
<code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">fl2</span><span class="p">,</span> <span class="n">fl7</span><span class="p">,</span> <span class="o">...</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code></span><a class="headerlink" href="#id9" title="Link to this image">Â¶</a></p>
</figcaption>
</figure>
</td>
<td><figure class="align-center" id="id10">
<a class="dark-light reference internal image-reference" href="../_images/srgb_spectrum.svg"><img alt="../_images/srgb_spectrum.svg" class="dark-light" src="../_images/srgb_spectrum.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4.30 </span><span class="caption-text">Possible sRGB primary spectra.
Available as <code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with
<code class="code highlight python docutils literal highlight-python"><span class="n">srgb_r</span><span class="p">,</span> <span class="n">srgb_g</span><span class="p">,</span> <span class="o">...</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code></span><a class="headerlink" href="#id10" title="Link to this image">Â¶</a></p>
</figcaption>
</figure>
</td>
</tr>
<tr class="row-odd"><td><figure class="align-center" id="id11">
<a class="dark-light reference internal image-reference" href="../_images/cie_cmf.svg"><img alt="../_images/cie_cmf.svg" class="dark-light" src="../_images/cie_cmf.svg" style="width: 500px;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 4.31 </span><span class="caption-text">CIE color matching functions.
Available as <code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code></span><a class="headerlink" href="#id11" title="Link to this image">Â¶</a></p>
</figcaption>
</figure>
</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>Other presets include spectra from spectral lines combination in <a class="reference internal" href="#spectral-lines"><span class="std std-numref">Section 4.7.5</span></a>.
Namely <code class="code highlight python docutils literal highlight-python"><span class="n">ot</span><span class="o">.</span><span class="n">presets</span><span class="o">.</span><span class="n">light_spectrum</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;</span></code> with <code class="code highlight python docutils literal highlight-python"><span class="n">FdC</span><span class="p">,</span> <span class="n">FDC</span><span class="p">,</span> <span class="n">FeC</span><span class="p">,</span> <span class="n">F_eC_</span><span class="p">,</span> <span class="n">rgb</span></code> as <code class="code highlight python docutils literal highlight-python"><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span></code>.</p>
<hr class="docutils" />
<p><strong>References</strong></p>
<div class="docutils container" id="id3">
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="footcite-planckwiki" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Wikipedia. Planckâ€™s law. 2022. URL: <a class="reference external" href="https://en.wikipedia.org/wiki/Planck%27s_law">https://en.wikipedia.org/wiki/Planck%27s_law</a> (visited on 2022-12-01).</p>
</aside>
<aside class="footnote brackets" id="footcite-abbewiki" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Wikipedia. Abbe-Zahl. 2022. URL: <a class="reference external" href="https://de.wikipedia.org/wiki/Abbe-Zahl">https://de.wikipedia.org/wiki/Abbe-Zahl</a> (visited on 2022-12-16).</p>
</aside>
</aside>
</div>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="refraction_index.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title"><span class="section-number">4.6. </span>Refractive Indices</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="image.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title"><span class="section-number">4.8. </span>Image Classes</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright">
      &copy; 2025, Damian Mendroch &nbsp;  &nbsp; 
      <a href="../impressum.html" style="color: var(--pst-color-text-muted)">Impressum</a>
      &nbsp; &nbsp; 
      <a href="../impressum.html" style="color: var(--pst-color-text-muted)">Legal Notice</a>
      <br>
  
    </div>
    <div class="sy-foot-copyright">
      <p>
        Made with
    
        <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
        <a href="https://shibuya.lepture.com">Shibuya theme</a>.
      </p>
    </div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=5b045848"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/shibuya.js?v=e730760c"></script>
      <script>window.MathJax = {"loader": {"load": ["ui/lazy"]}, "options": {"lazyMargin": "400px", "lazyAlwaysTypeset": null}}</script>
      <script defer="defer" src="../_static/mathjax/tex-chtml.js"></script></body>
</html>